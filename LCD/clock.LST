C51 COMPILER V9.01   CLOCK                                                                 04/12/2016 19:27:35 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE CLOCK
OBJECT MODULE PLACED IN clock.OBJ
COMPILER INVOKED BY: C:\Keil_v4\C51\BIN\C51.EXE clock.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #include<clock.h>
   3          
   4          int data time[6] = {1970,1,1,0,0,0};
   5          int data second[3] ={0,0,0};
   6          unsigned char timeMs10 = 0;
   7          unsigned char secMs10 = 0;
   8          clockTypeDef clock;
   9          void timeCalc(void){
  10   1              timeMs10++;
  11   1              if(timeMs10 == 100) {
  12   2                      timeMs10 = 0;
  13   2                      time[5]++;
  14   2                      if(time[5] == 60) {
  15   3                              time[4]++;
  16   3                              time[5] = 0;
  17   3                              if(time[4] == 60) {
  18   4                                      time[3]++;
  19   4                                      time[4] = 0;
  20   4                                      if(time[3] == 24) {
  21   5                                              time[2]++;
  22   5                                              time[3] = 0;
  23   5                                              if(time[1] == 1 || time[1] == 3 || time[1] == 5 || time[1] == 7 || time[1] == 8 || time[1] == 10 || t
             -ime[1] == 12) {
  24   6                                                      if(time[2] == 31) {
  25   7                                                              time[1]++;
  26   7                                                              time[2] = 0;
  27   7                                                              if(time[1] == 12) {
  28   8                                                                      time[0]++;
  29   8                                                              }
  30   7                                                      }       
  31   6                                              }
  32   5                                              if(time[1] == 4 || time[1] == 6 || time[1] == 9 || time[1] == 11) {
  33   6                                                      if(time[2] == 30) {
  34   7                                                              time[1]++;
  35   7                                                              time[2] = 0;
  36   7                                                      }
  37   6                                              }
  38   5                                              if(time[1] >= 2) {
  39   6                                                      if(time[0]%4 == 0) {
  40   7                                                              if(time[2] == 29) {
  41   8                                                                      time[1]++;
  42   8                                                                      time[2] = 0;
  43   8                                                              }
  44   7                                                      }
  45   6                                                      else
  46   6                                                              if(time[2] == 28) {
  47   7                                                                      time[1]++;
  48   7                                                                      time[2] = 0;
  49   7                                                              }
  50   6                                              }
  51   5                                      }
  52   4                              }
  53   3                      }               
  54   2              }
C51 COMPILER V9.01   CLOCK                                                                 04/12/2016 19:27:35 PAGE 2   

  55   1              clock.Year = time[0];
  56   1              clock.Month = time[1];
  57   1              clock.Day = time[2];
  58   1              clock.Hour = time[3];
  59   1              clock.Minute = time[4];
  60   1              clock.Second = time[5];                                 
  61   1      }
  62          
  63          void secondCalc(void) {
  64   1              secMs10++;
  65   1              if(secMs10 == 1) {
  66   2                      second[2] += 1;
  67   2                      secMs10 = 0;
  68   2                      if(second[2] == 99) {
  69   3                              second[2] = 0;
  70   3                              second[1]++;
  71   3                              if(second[1] == 60) {
  72   4                                      second[1] = 0;
  73   4                                      second[0]++;
  74   4                              }
  75   3                      }
  76   2              }
  77   1                      
  78   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    398    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
