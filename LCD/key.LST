C51 COMPILER V9.01   KEY                                                                   04/12/2016 19:27:35 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN key.OBJ
COMPILER INVOKED BY: C:\Keil_v4\C51\BIN\C51.EXE key.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include<key.h>
   3          #include<hc165.h>
   4          #include<lcd.h>
   5          unsigned char flag;
   6          extern unsigned char flash;
   7          extern char position;
   8          extern int data time[6];
   9          unsigned char mode = 1;
  10          unsigned char clearFlag = 1;
  11          unsigned char startFlag = 1; 
  12          void keyControl(void) {
  13   1              flag = hc165_re();
  14   1              Delay1ms(100);
  15   1              flag = hc165_re();
  16   1              if(flag == 0xfe) {
  17   2                      mode = 0;
  18   2              }
  19   1              if(flag == 0xfd) {
  20   2                      if(startFlag == 0)
  21   2                              startFlag = 1;
  22   2                      else
  23   2                              startFlag = 0; 
  24   2              }
  25   1              if(flag == 0xfb) {
  26   2                      flash = 1;
  27   2                      clearFlag = 0;
  28   2              }                                
  29   1              if(flag == 0x7f) {
  30   2                      flash = 0;
  31   2                      position = 0;
  32   2                      mode = 1;
  33   2              }
  34   1              if(flag == 0xf7) {
  35   2                      Delay1ms(100);
  36   2                      position = position - 1;
  37   2                      if(position < 0)
  38   2                              position = 13;
  39   2              }
  40   1              if(flag == 0xef) {
  41   2                      Delay1ms(100);
  42   2      
  43   2      
  44   2                      position = position + 1;
  45   2                      if(position > 13)
  46   2                              position = 0;
  47   2              }                
  48   1              if(flag == 0xdf && flash == 1) {
  49   2                      Delay1ms(100);
  50   2                      if(position == 0) {
  51   3                              if(time[0]/1000 > 8)
  52   3                                      time[0] = 0;    
  53   3                              else
  54   3                                      time[0] += 1000;                                        
  55   3                      }
C51 COMPILER V9.01   KEY                                                                   04/12/2016 19:27:35 PAGE 2   

  56   2                      if(position == 1) {
  57   3                              if(time[0]/100%10 > 8)
  58   3                                      time[0] = 0;
  59   3                              else
  60   3                                      time[0] += 100; 
  61   3                      }
  62   2                      if(position == 2) {
  63   3                              if(time[0]/10%10 > 8)
  64   3                                      time[0] = 0;
  65   3                              else
  66   3                                      time[0] += 10; 
  67   3                      }
  68   2                      if(position == 3) {
  69   3                              if(time[0]%10 > 8)
  70   3                                      time[0] = 0;
  71   3                              else
  72   3                                      time[0] += 1; 
  73   3                      }
  74   2                      if(position == 4) {
  75   3                              if(time[1]/10%10 > 0)
  76   3                                      time[1] = 0;
  77   3                              else
  78   3                                      time[1] += 10; 
  79   3                      }
  80   2                      if(position == 5) {
  81   3                              if(time[1]%10 > 8)
  82   3                                      time[1] = 0;
  83   3                              else
  84   3                                      time[1] += 1; 
  85   3                      }
  86   2                      if(position == 6) {
  87   3                              if(time[2]/10 > 2)
  88   3                                      time[2] = 0;
  89   3                              else
  90   3                                      time[2] += 10; 
  91   3                      }
  92   2                      if(position == 7) {
  93   3                              if(time[2]%10 > 8)
  94   3                                      time[2] = 0;
  95   3                              else
  96   3                                      time[2] += 1; 
  97   3                      }
  98   2                      if(position == 8) {
  99   3                              if(time[3]/10 > 1)
 100   3                                      time[3] = 0;
 101   3                              else
 102   3                                      time[3] += 10; 
 103   3                      }
 104   2                      if(position == 9) {
 105   3                              if(time[3]%10 > 8)
 106   3                                      time[3] = 0;
 107   3                              else
 108   3                                      time[3] += 1; 
 109   3                      }
 110   2                      if(position == 10) {
 111   3                              if(time[4]/10 > 4)
 112   3                                      time[4] = 0;
 113   3                              else
 114   3                                      time[4] += 10; 
 115   3                      }
 116   2                      if(position == 11) {
 117   3                              if(time[4]%10 > 8)
C51 COMPILER V9.01   KEY                                                                   04/12/2016 19:27:35 PAGE 3   

 118   3                                      time[4] = 0;
 119   3                              else
 120   3                                      time[4] += 1;                           
 121   3                      }
 122   2                      if(position == 12) {
 123   3                              if(time[5]/10 > 4)
 124   3                                      time[5] = 0;
 125   3                              else
 126   3                                      time[5] += 10; 
 127   3                      }
 128   2                      if(position == 13) {
 129   3                              if(time[5]%10 > 8)
 130   3                                      time[5] = 0;
 131   3                              else
 132   3                                      time[5] += 1;                           
 133   3                      }
 134   2                                              
 135   2              }
 136   1              if(flag == 0xbf && flash == 1) {
 137   2                      Delay1ms(100);
 138   2                      if(position == 0) {
 139   3                              if(time[0]/1000 < 1)
 140   3                                      time[0] = 0;    
 141   3                              else
 142   3                                      time[0] -= 1000;                                        
 143   3                      }
 144   2                      if(position == 1) {
 145   3                              if(time[0]/100%10 < 1)
 146   3                                      time[0] = 0;
 147   3                              else
 148   3                                      time[0] -= 100; 
 149   3                      }
 150   2                      if(position == 2) {
 151   3                              if(time[0]/10%10 < 1)
 152   3                                      time[0] = 0;
 153   3                              else
 154   3                                      time[0] -= 10; 
 155   3                      }
 156   2                      if(position == 3) {
 157   3                              if(time[0]%10 < 1)
 158   3                                      time[0] = 0;
 159   3                              else
 160   3                                      time[0] -= 1; 
 161   3                      }
 162   2                      if(position == 4) {
 163   3                              if(time[1]/10%10 < 1)
 164   3                                      time[1] = 0;
 165   3                              else
 166   3                                      time[1] -= 10; 
 167   3                      }
 168   2                      if(position == 5) {
 169   3                              if(time[1]%10 < 1)
 170   3                                      time[1] = 0;
 171   3                              else
 172   3                                      time[1] -= 1; 
 173   3                      }
 174   2                      if(position == 6) {
 175   3                              if(time[2]/10 < 1)
 176   3                                      time[2] = 0;
 177   3                              else
 178   3                                      time[2] -= 10; 
 179   3                      }
C51 COMPILER V9.01   KEY                                                                   04/12/2016 19:27:35 PAGE 4   

 180   2                      if(position == 7) {
 181   3                              if(time[2]%10 < 1)
 182   3                                      time[2] = 0;
 183   3                              else
 184   3                                      time[2] -= 1; 
 185   3                      }
 186   2                      if(position == 8) {
 187   3                              if(time[3]/10 < 1)
 188   3                                      time[3] = 0;
 189   3                              else
 190   3                                      time[3] -= 10; 
 191   3                      }
 192   2                      if(position == 9) {
 193   3                              if(time[3]%10 < 1)
 194   3                                      time[3] = 0;
 195   3                              else
 196   3                                      time[3] -= 1; 
 197   3                      }
 198   2                      if(position == 10) {
 199   3                              if(time[4]/10 < 1)
 200   3                                      time[4] = 0;
 201   3                              else
 202   3                                      time[4] -= 10; 
 203   3                      }
 204   2                      if(position == 11) {
 205   3                              if(time[4]%10 < 1)
 206   3                                      time[4] = 0;
 207   3                              else
 208   3                                      time[4] -= 1;                           
 209   3                      }
 210   2                      if(position == 12) {
 211   3                              if(time[5]/10 < 1)
 212   3                                      time[5] = 0;
 213   3                              else
 214   3                                      time[5] -= 10; 
 215   3                      }
 216   2                      if(position == 13) {
 217   3                              if(time[5]%10 < 1)
 218   3                                      time[5] = 0;
 219   3                              else
 220   3                                      time[5] -= 1;                           
 221   3                      }
 222   2                                              
 223   2              }
 224   1      
 225   1      }
 226          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1439    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
