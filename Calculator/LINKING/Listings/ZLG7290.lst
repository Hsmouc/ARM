C51 COMPILER V9.01   ZLG7290                                                               05/10/2016 23:03:06 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE ZLG7290
OBJECT MODULE PLACED IN .\LINKING\Output\ZLG7290.obj
COMPILER INVOKED BY: C:\Keil_v4\C51\BIN\C51.EXE DRI\ZLG7290.c BROWSE INCDIR(.\DRI;.\SYS;.\USR) DEBUG OBJECTEXTEND PRINT(
                    -.\LINKING\Listings\ZLG7290.lst) OBJECT(.\LINKING\Output\ZLG7290.obj)

line level    source

   1          #include  "i2c.h"
   2          #include  "ZLG7290.h"
   3          #define EEPROM24C02     0xA0
   4          #define  ZLG7290    0x70     //–æ∆¨µÿ÷∑
   5          
   6          #define  SubKey     0x01 
   7          #define  SubCmdBuf  0x07
   8          #define  SubDpRam   0x10
   9          
  10          unsigned char key_code=0x4d;
  11          unsigned char key_press=0;
  12          
  13          void ZLG7290_ReadData(unsigned char address,unsigned char num)
  14          {
  15   1          IRcvStr(ZLG7290,address,I2C_temp,num);
  16   1      }
  17          
  18          void ZLG7290_WriteData(unsigned char address,unsigned char *buf,unsigned char num)
  19          {
  20   1          ISendStr(ZLG7290,address,buf,num);
  21   1      }
  22          
  23          void Read_ZLG7290Key(void)
  24          {
  25   1          char  usTmp;
  26   1          ZLG7290_ReadData(1,1);
  27   1          usTmp=I2C_temp[0];
  28   1          if(usTmp !=0)
  29   1          {
  30   2              if(usTmp<0x41)
  31   2              {
  32   3                  key_press=1;
  33   3                  key_code=usTmp;
  34   3              }
  35   2          }
  36   1      }
  37          
  38          void delayMS(unsigned int i)
  39          {
  40   1              unsigned int j,k;
  41   1              for(k=0;k<i;k++)
  42   1                      for(j=0;j<60;j++);
  43   1      }
  44          
  45          
  46          unsigned char ZLG7290_SendData(unsigned char SubAdd,unsigned char Data)
  47          {
  48   1          I2C_temp[0]=Data;
  49   1          if(SubAdd>0x17)
  50   1              {
  51   2              return 0;
  52   2          }
  53   1          ZLG7290_WriteData(SubAdd,I2C_temp,1);
  54   1              return 1;
C51 COMPILER V9.01   ZLG7290                                                               05/10/2016 23:03:06 PAGE 2   

  55   1      }
  56          
  57          unsigned char ZLG7290_SendCmd(unsigned char Data1,unsigned char Data2)
  58          {
  59   1          I2C_temp[0]=Data1;
  60   1          I2C_temp[1]=Data2;
  61   1          ZLG7290_WriteData(7,I2C_temp,2);
  62   1          delayMS(1);
  63   1          return 1;
  64   1      }  
  65          
  66          unsigned char ZLG7290_SendCmd0(unsigned char Data1)
  67          {
  68   1          I2C_temp[0]=Data1;
  69   1      
  70   1          ZLG7290_WriteData(7,I2C_temp,1);
  71   1          delayMS(1);
  72   1          return 1;
  73   1      }  
  74              
  75          
  76          void clear_zlg7290_disp(void)
  77          {
  78   1          char i;
  79   1          for(i=0;i<8;i++)
  80   1          {
  81   2              ZLG7290_SendCmd(0x60+i,0x1f);
  82   2          }
  83   1      }
  84          
  85          void  zlg7290_disp_keycode(void)
  86          {       
  87   1          ZLG7290_SendCmd(0x60,0x0c);
  88   1          ZLG7290_SendCmd(0x61,0x00);
  89   1          ZLG7290_SendCmd(0x62,0x0d);
  90   1          ZLG7290_SendCmd(0x63,0x0e);
  91   1              ZLG7290_SendCmd(0x01,0xa6);
  92   1              ZLG7290_SendCmd(0x01,0xae);
  93   1          ZLG7290_SendCmd(0x66,key_code/10);    
  94   1          ZLG7290_SendCmd(0x67,key_code%10);
  95   1      } 
  96          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    252    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
