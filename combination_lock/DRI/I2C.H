#ifndef  _I2C_H_
#define  _I2C_H_
/***********************I2C.h函数声明部分***************************/

extern bit ack;    /*应答标志位*/

extern unsigned char I2C_temp[8];

extern void I2C_delay(unsigned char dly);

//起动总线函数
/*******************************************************************
                     起动总线函数               
函数原型: void  Start_I2c();  
功能:     启动I2C总线,即发送I2C起始条件.  
********************************************************************/
extern void Start_I2c();

//结束总线函数
/*******************************************************************
                      结束总线函数               
函数原型: void  Stop_I2c();  
功能:     结束I2C总线,即发送I2C结束条件.  
********************************************************************/  
extern void Stop_I2c();

//应答子函数
/*******************************************************************
                     应答子函数
函数原型:  void Ack_I2c(bit a);
功能:      主控器进行应答信号(可以是应答或非应答信号，由位参数a决定)
********************************************************************/
extern void Ack_I2c(bit a);

//字节数据发送函数
/*******************************************************************
                 字节数据发送函数               
函数原型: void  SendByte(UCHAR c);
功能:     将数据c发送出去,可以是地址,也可以是数据,发完后等待应答,并对
          此状态位进行操作.(不应答或非应答都使ack=0)     
           发送数据正常，ack=1; ack=0表示被控器无应答或损坏。
********************************************************************/
extern void  SendByte(unsigned char  c);

/*******************************************************************
                 字节数据接收函数               
函数原型: UCHAR  RcvByte();
功能:        用来接收从器件传来的数据,并判断总线错误(不发应答信号)，
          发完后请用应答函数应答从机。  
********************************************************************/    
extern unsigned char   RcvByte();

/*******************************************************************
                    向有子地址器件发送多字节数据函数               
函数原型: bit  ISendStr(UCHAR sla,UCHAR suba,ucahr *s,UCHAR no);  
功能:     从启动总线到发送地址，子地址,数据，结束总线的全过程,从器件
          地址sla，子地址suba，发送内容是s指向的内容，发送no个字节。
          如果返回1表示操作成功，否则操作有误。
注意：    使用前必须已结束总线。
********************************************************************/
extern bit ISendStr(unsigned char  sla,unsigned char  suba,unsigned char *s,unsigned char  no);

/*******************************************************************
                    向有子地址器件读取多字节数据函数               
函数原型: bit  RecndStr(UCHAR sla,UCHAR suba,ucahr *s,UCHAR no);  
功能:     从启动总线到发送地址，子地址,读数据，结束总线的全过程,从器件
          地址sla，子地址suba，读出的内容放入s指向的存储区，读no个字节。
           如果返回1表示操作成功，否则操作有误。
注意：    使用前必须已结束总线。
********************************************************************/
extern bit IRcvStr(unsigned char  sla,unsigned char  suba,unsigned char  *s,unsigned char  no);

/*************************************************************************************************
功能：I2C总线初始化，使总线处于空闲状态
参数：无
返回：无
说明：在main()函数的开始处，应当执行一次本函数
*************************************************************************************************/
extern void  I2C_Init(void);

#endif
